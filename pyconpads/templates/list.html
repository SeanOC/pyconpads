{% extends "base.html" %}

{% block js %}
  {{ block.super }}
  <script src="{{ MEDIA_URL }}site/js/jquery.maskedinput.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="{{ MEDIA_URL }}site/js/jquery.jeditable.masked.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      $('.pad-description').editable("{% url update-description %}", {
        tooltip: 'click to edit...',
        indicator: '<img src="{{ MEDIA_URL }}site/imgs/ajax-loader.gif" />',
        placeholder: "–",
        callback: function (result_json) {
                    result = $.parseJSON(result_json)
                    $(this).text(result.description);
                  }
      });
      $('.pad-date').editable("{% url update-date %}", {
        tooltip: 'click to edit...',
        indicator: '<img src="{{ MEDIA_URL }}site/imgs/ajax-loader.gif" />',
        type: 'masked',
        mask: '99/99/9999 99:99',
        placeholder: '–'
      })
   });
  </script>
{% endblock %}

{% block css %}
<style type="text/css" media="screen">
  .pad-edit {
    display: none;
  }
  .pad-description, .pad-date {
    display: inline;
  }
</style>
{% endblock %}

{% block main_content %}
<h1>Pad Index</h1>
<div class="promo">sponsored by HUGE</div>
<p>Here are all of the pads 
<table id="pads">
  <tr>
    <th>Pad</th>
    <th>Description</th>
    <th>Talk Time</th>
  </tr>
  {% for pad in pads %}
    <tr>
      <td class="pad"><a href="{{ pad.etherpad_url }}">{{ pad.id }}</a></td>
      <td><span class="pad-description" id="{{ pad.id }}">{{ pad.description}}</span></td>
      <td><span class="pad-date" id="{{ pad.id}}">{{ pad.talk_time|date:"m/d/Y H:i" }}</span></td>
    </tr>
  {% endfor %}
</table>
{% endblock %}